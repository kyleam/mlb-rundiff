
sudo: required

services:
  - docker

language: generic

git:
  submodules: false

before_install:
  - docker build -t kyleam/mlb-rundiff .

script:
  - docker run -it --rm -v $HOME/output:/opt/mlb-rundiff/output --entrypoint '/bin/sh' kyleam/mlb-rundiff run-tests > tests-output
  - cat tests-output
  - if grep -q "impossible" tests-output; then false; else true; fi
  - docker run -it --rm -v $HOME/output:/opt/mlb-rundiff/output kyleam/mlb-rundiff output/models/rundiff-oneseason_2011-fit.rds
